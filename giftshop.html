<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Charles Benjamin - Souvenir Gift Shop</title>
    <link rel="shortcut icon" type="image/png" href="https://a.imge.to/2019/06/29/gD8YY.png">
    <style>
        body {
            font-family: "Baskerville", serif;
            font-style: italic;
            /* Changed background to white as requested */
            background-color: #ffffff;
            font-size: clamp(0.9rem, 2vw, 1.15rem);
            z-index: 1001;
            color: #000;
            margin: 10px;
        }
        /* Navigation (Shared) */
        .nav-row {
            text-align: right;
            padding-right: 10px;
            margin-bottom: 20px;
        }
        /* Grid Container */
        .shop-grid {
            display: grid;
            gap: 15px;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 10px;
            box-sizing: border-box;
            /* Transitions for the squeeze effect. 
               Using a cubic bezier for a more organic/liquid feel. */
            transition: grid-template-columns 0.4s cubic-bezier(0.25, 0.8, 0.25, 1),
                grid-template-rows 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        /* Product Item */
        .product-item {
            display: flex;
            flex-direction: column;
            box-sizing: border-box;
            background-color: #ffffff;
            /* Prevents long text from forcing the column to stay wide when squished */
            min-width: 0;
        }
        .product-img {
            width: 100%;
            height: 10px;
            /* Small base height so flex-grow handles sizing */
            flex-grow: 1;
            /* object-fit: fill; allows the image to stretch/squeeze horizontally and vertically */
            object-fit: fill;
        }
        .shop-info {
            font-family: "Baskerville", serif;
            font-style: italic;
            text-align: center;
            margin-top: 10px;
            /* Fixed height ensures text container doesn't scale, only the image squishes */
            height: 90px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            width: 100%;
        }
        .shop-desc {
            margin: 0 0 5px 0;
            font-size: 1.1rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
        }
        .shop-price-row {
            margin: 0 0 5px 0;
            display: flex;
            justify-content: center;
            gap: 10px;
            align-items: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
        }
        .shop-price {
            font-weight: bold;
        }
        .shop-sold {
            color: red;
            font-weight: bold;
            display: none;
        }
        .shop-sold.visible {
            display: inline;
        }
        .request-btn {
            display: inline-block;
            text-decoration: underline;
            color: black;
            cursor: pointer;
            font-size: 1rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }
        .request-btn:hover {
            text-decoration: none;
        }
    </style>
</head>
<body bgcolor="FFFFFF" text="grey" link="#000000" vlink="#000000" alink="#000000">
    <!-- Navigation -->
    <div class="nav-row">
        <i>
            <a style="text-decoration: none; color:black; font-style: italic;" href="index.html"
                target="_self">Exhibitions</a>&nbsp;&nbsp;
            <a style="text-decoration: none; color:black;" href="work" target="_self"
                target="blank">Works</a>&nbsp;&nbsp;
            <a style="text-decoration: underline; color:black;" href="giftshop" target="_self"
                target="blank">Giftshop</a>&nbsp;&nbsp;
            &nbsp;&nbsp;<a style="text-decoration: none; color:black;" href="text"
                target="_self">Texts/publication</a>&nbsp;&nbsp;
            <a style=" text-decoration: none; color:black;" href="contact" target="_self"><span
                    style="color:black">Contact</span></a>
            &nbsp;&nbsp;<a style="text-decoration: none; color:black;" href="http:\\www.mariokreuzberg.com"
                target="_self">Mario Kreuzberg</a>&nbsp;&nbsp;
            &nbsp;&nbsp;<a style="text-decoration: none; color:black;" href="http:\\hellenkeller.work"
                target="_self">Hellen Keller</a>&nbsp;&nbsp;
        </i>
    </div>
    <!-- Main Shop Viewer -->
    <div id="shop-container"></div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Provided product data
            const products = [
                { id: 1, src: "https://i.imgur.com/gD8YY.png", desc: "Item 1 Description", price: "100 CHF", sold: false },
                { id: 2, src: "https://i.imgur.com/gD8YY.png", desc: "Item 2 Description", price: "150 CHF", sold: true },
                { id: 3, src: "https://i.imgur.com/gD8YY.png", desc: "Item 3 Description", price: "200 CHF", sold: false },
                { id: 4, src: "https://i.imgur.com/gD8YY.png", desc: "Item 4 Description", price: "120 CHF", sold: false },
                { id: 5, src: "https://i.imgur.com/gD8YY.png", desc: "Item 5 Description", price: "80 CHF", sold: false },
                { id: 6, src: "https://i.imgur.com/gD8YY.png", desc: "Item 6 Description", price: "300 CHF", sold: true },
                { id: 7, src: "https://i.imgur.com/gD8YY.png", desc: "Item 7 Description", price: "90 CHF", sold: false },
                { id: 8, src: "https://i.imgur.com/gD8YY.png", desc: "Item 8 Description", price: "110 CHF", sold: false },
                { id: 9, src: "https://i.imgur.com/gD8YY.png", desc: "Item 9 Description", price: "50 CHF", sold: false },
                { id: 10, src: "https://i.imgur.com/gD8YY.png", desc: "Item 10 Description", price: "500 CHF", sold: true },
                { id: 11, src: "https://i.imgur.com/gD8YY.png", desc: "Item 11 Description", price: "250 CHF", sold: false },
                { id: 12, src: "https://i.imgur.com/gD8YY.png", desc: "Item 12 Description", price: "180 CHF", sold: false },
                { id: 13, src: "https://i.imgur.com/gD8YY.png", desc: "Item 13 Description", price: "130 CHF", sold: false },
                { id: 14, src: "https://i.imgur.com/gD8YY.png", desc: "Item 14 Description", price: "160 CHF", sold: false },
                { id: 1, src: "https://i.imgur.com/IVt04tb.jpg", desc: "Item 1 Description", price: "100 CHF", sold: false },
                { id: 2, src: "https://i.imgur.com/h4wLOLD.jpg", desc: "Item 2 Description", price: "150 CHF", sold: true },
                { id: 3, src: "https://i.imgur.com/5CZKkqy.jpg", desc: "Item 3 Description", price: "200 CHF", sold: false },
                { id: 4, src: "https://imgur.com/wq7WPKj", desc: "Item 4 Description", price: "120 CHF", sold: false },
                { id: 5, src: "https://i.imgur.com/KODeWZu.jpg", desc: "Item 5 Description", price: "80 CHF", sold: false },
                { id: 6, src: "https://i.imgur.com/FCSshj2.jpg", desc: "Item 6 Description", price: "300 CHF", sold: true },
                { id: 7, src: "https://i.imgur.com/yilKfOJ.jpg", desc: "Item 7 Description", price: "90 CHF", sold: false },
                { id: 8, src: "https://i.imgur.com/xulEG8m.jpg", desc: "Item 8 Description", price: "110 CHF", sold: false },
                { id: 9, src: "https://i.imgur.com/rK6MvpQ.jpg", desc: "Item 9 Description", price: "50 CHF", sold: false },
                { id: 10, src: "https://i.imgur.com/6yVrGHm.jpg", desc: "Item 10 Description", price: "500 CHF", sold: true },
                { id: 11, src: "https://i.imgur.com/CvIVqm0.jpg", desc: "Item 11 Description", price: "250 CHF", sold: false },
                { id: 12, src: "https://i.imgur.com/SbfsLME.jpg", desc: "Item 12 Description", price: "180 CHF", sold: false },
                { id: 13, src: "https://i.imgur.com/Qf9rNi3.jpg", desc: "Item 13 Description", price: "130 CHF", sold: false },
                { id: 14, src: "https://i.imgur.com/3gIO7X3.jpg", desc: "Item 14 Description", price: "160 CHF", sold: false },
                { id: 15, src: "https://i.imgur.com/gD8YY.png", desc: "Item 15 Description", price: "60 CHF", sold: false },
                { id: 16, src: "https://i.imgur.com/gD8YY.png", desc: "Item 16 Description", price: "75 CHF", sold: false },
                { id: 17, src: "https://i.imgur.com/gD8YY.png", desc: "Item 17 Description", price: "220 CHF", sold: true },
                { id: 18, src: "https://i.imgur.com/gD8YY.png", desc: "Item 18 Description", price: "95 CHF", sold: false },
                { id: 19, src: "https://i.imgur.com/gD8YY.png", desc: "Item 19 Description", price: "140 CHF", sold: false },
                { id: 20, src: "https://i.imgur.com/gD8YY.png", desc: "Item 20 Description", price: "1000 CHF", sold: true },
            ];
            const grid = document.getElementById('shop-container');
            // Setup responsive columns
            function getColumns() {
                if (window.innerWidth >= 1024) return 5;
                if (window.innerWidth >= 768) return 4;
                if (window.innerWidth >= 500) return 3;
                return 2;
            }
            let currentCols = getColumns();
            // Populate the grid securely
            function renderGrid() {
                grid.innerHTML = '';
                grid.className = 'shop-grid';
                products.forEach((product, idx) => {
                    const item = document.createElement('div');
                    item.className = 'product-item';
                    item.dataset.index = idx; // So we track hover precisely map to x,y coords
                    const img = document.createElement('img');
                    img.src = product.src;
                    img.alt = product.desc;
                    img.className = 'product-img';
                    const info = document.createElement('div');
                    info.className = 'shop-info';
                    const desc = document.createElement('div');
                    desc.className = 'shop-desc';
                    desc.textContent = product.desc;
                    const priceRow = document.createElement('div');
                    priceRow.className = 'shop-price-row';
                    const price = document.createElement('span');
                    price.className = 'shop-price';
                    price.textContent = product.price;
                    priceRow.appendChild(price);
                    const sold = document.createElement('span');
                    sold.className = 'shop-sold';
                    sold.textContent = 'SOLD';
                    if (product.sold) {
                        sold.classList.add('visible');
                    }
                    priceRow.appendChild(sold);
                    const btn = document.createElement('a');
                    btn.className = 'request-btn';
                    if (product.sold) {
                        btn.textContent = "Send email regarding this item";
                    } else {
                        btn.textContent = "Request this item";
                    }
                    const email = "placeholder@email.com";
                    const subject = `Request for ${product.desc} (ID: ${product.id})`;
                    const body = `Hi,\n\nI am interested in purchasing: ${product.desc} (${product.price}).\n\nPlease let me know if it is available.`;
                    btn.href = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                    info.appendChild(desc);
                    info.appendChild(priceRow);
                    info.appendChild(btn);
                    item.appendChild(img);
                    item.appendChild(info);
                    grid.appendChild(item);
                });
                updateGridTemplate(-1, -1);
            }
            // Calculate precisely how much `fr` the hovered column needs to reach 1.3x size.
            function getHoverFr(cols, multiplier = 1.3) {
                if (cols <= 1) return 1;
                const normalPct = 1 / cols;
                const targetPct = Math.min(normalPct * multiplier, 0.9);
                const remainderPct = (1 - targetPct) / (cols - 1);
                return targetPct / remainderPct;
            }
            // Centralized animation map over CSS grid tracks
            function updateGridTemplate(hoverIdx) {
                const cols = currentCols;
                const rowsCount = Math.ceil(products.length / cols);
                // Construct Grid Columns map (fraction basis)
                let colTemplate = Array(cols).fill('minmax(0, 1fr)');
                let rowTemplate = Array(rowsCount).fill('300px'); // Base height
                if (hoverIdx !== -1) {
                    const c = hoverIdx % cols; // target column
                    const r = Math.floor(hoverIdx / cols); // target row
                    // We modify columns to double the target column's width.
                    // The easiest CSS Grid way to "only affect siblings" is using complex
                    // fractional math that squishes adjacent columns to make space for 2fr,
                    // without making furthest columns shrink too much.
                    // We'll give target Col 2fr, and adjacent cols 0.5fr, and remaining cols 1fr.
                    for (let x = 0; x < cols; x++) {
                        if (x === c) colTemplate[x] = 'minmax(0, 2fr)'; // 2x Width (approx depending on other elements)
                        else if (Math.abs(x - c) === 1) colTemplate[x] = 'minmax(0, 0.5fr)'; // Squeeze adjacents
                        else colTemplate[x] = 'minmax(0, 1fr)'; // Rest remain standard
                    }
                    // Modify row heights to achieve the 2x height scale 
                    // Base size was 300px, we make it 600px
                    for (let y = 0; y < rowsCount; y++) {
                        if (y === r) rowTemplate[y] = '600px'; // 2x Height
                        else if (Math.abs(y - r) === 1) rowTemplate[y] = '150px'; // Squeeze adjacent rows vertically
                        else rowTemplate[y] = '300px'; // Rest remain standard
                    }
                }
                grid.style.gridTemplateColumns = colTemplate.join(' ');
                grid.style.gridTemplateRows = rowTemplate.join(' ');
            }
            renderGrid();
            // Re-eval on orientation change / resize
            window.addEventListener('resize', () => {
                const newCols = getColumns();
                if (newCols !== currentCols) {
                    currentCols = newCols;
                    updateGridTemplate(-1);
                }
            });
            // Map standard mouseevents intelligently over the grid
            grid.addEventListener('mouseover', (e) => {
                const item = e.target.closest('.product-item');
                if (!item) return;
                const idx = parseInt(item.dataset.index);
                updateGridTemplate(idx);
            });
            grid.addEventListener('mouseleave', () => {
                updateGridTemplate(-1);
            });
        });
    </script>
</body>
</html>
